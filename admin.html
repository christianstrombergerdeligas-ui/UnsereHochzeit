<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin-Panel - Unsere Hochzeit</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>💒</text></svg>">
  <link href="style.css" rel="stylesheet">
  <script src="admin.js"></script>
</head>
<body>
  <header>
    <div class="header-content">
      <h1>Unsere Hochzeit</h1>
      <button id="hamburger" class="hamburger">☰</button>
      <button id="adminToggle" class="admin-toggle" title="Admin">🔒</button>
    </div>
    <nav id="navMenu">
      <a href="index.html">Start</a>
      <a href="geschichte.html" id="historyLink" style="display:none;">Unsere Geschichte</a>
      <a href="termine.html">Termine & Orte</a>
      <a href="anmeldung.html">Anmeldung zur Feier</a>
      <a href="ablaufplan.html" id="ablaufplanLink" style="display:none;">Ablaufplan</a>
      <a href="buffet.html" id="buffetLink" style="display:none;">Buffet</a>
      <a href="fotos.html">Fotos</a>
      <a href="unterhaltung.html">Unterhaltung</a>
      <a href="gaestebuch.html" id="guestbookLink" style="display:none;">Gästebuch</a>
      <a href="danksagung.html" id="danksagungLink" style="display:none;">Danksagung</a>
      <a href="admin.html" id="adminLink" style="display:none;">⚙️ Admin</a>
    </nav>
  </header>

  <main>
    <section id="adminOnlySection" style="display:none;">
      <div class="admin-hero">
        <div class="admin-hero-content">
          <div class="admin-hero-icon">⚙️</div>
          <h1>Admin-Panel</h1>
          <p class="admin-hero-lead">Verwaltung und Übersicht der Hochzeitswebsite</p>
        </div>
      </div>

      <!-- Countdown zur Hochzeit -->
      <section class="countdown-admin">
        <div class="countdown-content">
          <h2>⏰ Countdown zur Hochzeit</h2>
          <div class="countdown-display">
            <div class="countdown-item">
              <span id="daysUntil" class="countdown-number">0</span>
              <span class="countdown-label">Tage</span>
            </div>
            <div class="countdown-item">
              <span id="hoursUntil" class="countdown-number">0</span>
              <span class="countdown-label">Stunden</span>
            </div>
          </div>
          <p class="countdown-date">bis zum 15. Mai 2026, 10:30 Uhr</p>
        </div>
      </section>

      <section class="admin-links-section">
        <div class="links-container">
          <h2>📊 Daten & Verwaltung</h2>
          <p class="section-intro">Direktzugriff auf alle wichtigen Google-Dienste</p>
          <div class="admin-cards-grid">
            <article class="admin-link-card">
              <div class="link-card-icon">📋</div>
              <h3>Gäste-Anmeldungen</h3>
              <p>Verwalte Anmeldungen und Formular-Einträge</p>
              <div class="dual-link-buttons">
                <a href="https://docs.google.com/spreadsheets/d/1SwjMCVS46jWZfRo3TKmKw7Vn-Ctw-ZEu0FNl9DaPRoA/edit" target="_blank" class="external-link-button">
                  <span>Sheets</span>
                  <span class="button-arrow">→</span>
                </a>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSeYBf7pFwShJtmzqDOHgxlK_lLpNWErDJAb5DTMiYKV25i_uA/viewform?usp=sharing" target="_blank" class="external-link-button">
                  <span>Formular</span>
                  <span class="button-arrow">→</span>
                </a>
              </div>
            </article>

            <article class="admin-link-card">
              <div class="link-card-icon">📔</div>
              <h3>Gästebuch</h3>
              <p>Alle Gästebucheinträge und Glückwünsche einsehen</p>
              <a href="https://docs.google.com/spreadsheets/d/1FUX4_U9ZZ9qPX97uGUVOy9RVefLf7loBMCz5I2VySsY/edit" target="_blank" class="external-link-button">
                <span>Sheets öffnen</span>
                <span class="button-arrow">→</span>
              </a>
            </article>

            <article class="admin-link-card">
              <div class="link-card-icon">📸</div>
              <h3>Foto-Album</h3>
              <p>Alle von Gästen hochgeladenen Fotos verwalten</p>
              <a href="https://photos.app.goo.gl/TNup4TKHrsxtD7hz8" target="_blank" class="external-link-button">
                <span>Album öffnen</span>
                <span class="button-arrow">→</span>
              </a>
            </article>

            <article class="admin-link-card">
              <div class="link-card-icon">🎵</div>
              <h3>Musik-Playlist</h3>
              <p>Hochzeits-Playlist bei Spotify</p>
              <a href="https://open.spotify.com/playlist/17b3q1HeMFWk0jFn1SCz0F" target="_blank" class="external-link-button">
                <span>Spotify öffnen</span>
                <span class="button-arrow">→</span>
              </a>
            </article>
          </div>
        </div>
      </section>

      <!-- Hochzeitsplanung Checkliste -->
      <section class="checklist-container">
        <h2>✓ Hochzeitsplanung</h2>
        <div class="checklist">
          <div class="checklist-item">
            <input type="checkbox" id="task1" onchange="saveTasks()">
            <label for="task1">
              <span class="task-title">Location-Details final bestätigen</span>
              <span class="due-date">bis 01.03.2026</span>
            </label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="task2" onchange="saveTasks()">
            <label for="task2">
              <span class="task-title">Menükarten drucken lassen</span>
              <span class="due-date">bis 01.04.2026</span>
            </label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="task3" onchange="saveTasks()">
            <label for="task3">
              <span class="task-title">Finale Gästeliste prüfen</span>
              <span class="due-date">bis 01.05.2026</span>
            </label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="task4" onchange="saveTasks()">
            <label for="task4">
              <span class="task-title">Dekoration organisieren</span>
              <span class="due-date">bis 01.05.2026</span>
            </label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="task5" onchange="saveTasks()">
            <label for="task5">
              <span class="task-title">Musik-Playlist finalisieren</span>
              <span class="due-date">bis 10.05.2026</span>
            </label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="task6" onchange="saveTasks()">
            <label for="task6">
              <span class="task-title">Hochzeitsrede vorbereiten</span>
              <span class="due-date">bis 13.05.2026</span>
            </label>
          </div>
        </div>
      </section>

      <section class="admin-status-section">
        <div class="status-container">
          <h2>🔍 Feature-Status</h2>
          <p class="section-intro">Übersicht über die Sichtbarkeit der Seiten für Gäste</p>
          <div class="status-grid">
            <div class="status-card">
              <div class="status-header">
                <span class="status-emoji">📅</span>
                <h3>Ablaufplan</h3>
              </div>
              <div class="status-info">
                <span id="ablaufplanStatus" class="status-badge">🔒 Versteckt bis 01.05.2026</span>
              </div>
            </div>

            <div class="status-card">
              <div class="status-header">
                <span class="status-emoji">🍽️</span>
                <h3>Buffet</h3>
              </div>
              <div class="status-info">
                <span id="buffetStatus" class="status-badge">🔒 Versteckt bis 01.05.2026</span>
              </div>
            </div>

            <div class="status-card">
              <div class="status-header">
                <span class="status-emoji">📖</span>
                <h3>Gästebuch</h3>
              </div>
              <div class="status-info">
                <span id="guestbookStatus" class="status-badge">🔒 Versteckt bis 15.05.2026</span>
              </div>
            </div>

            <div class="status-card">
              <div class="status-header">
                <span class="status-emoji">💐</span>
                <h3>Danksagung</h3>
              </div>
              <div class="status-info">
                <span id="danksagungStatus" class="status-badge">🔒 Versteckt bis 16.05.2026</span>
              </div>
            </div>

            <div class="status-card">
              <div class="status-header">
                <span class="status-emoji">❤️</span>
                <h3>Unsere Geschichte</h3>
              </div>
              <div class="status-info">
                <span class="status-badge admin-only">🔒 Nur Admin</span>
              </div>
            </div>
          </div>
        </div>
      </section>

    <section id="notAdminSection" class="access-denied">
      <div class="denied-content">
        <div class="access-icon">🔒</div>
        <h2>Zugriff verweigert</h2>
        <p>Diese Seite ist nur im Admin-Modus verfügbar.</p>
        <p class="access-hint">Bitte melden Sie sich mit dem Admin-Passwort an.</p>
      </div>
    </section>
  </main>

  <footer>
    © 2026 Jenica und Christian
  </footer>

  <script>
  // Stelle sicher, dass Admin-Modus verfügbar ist
  window.isAdminMode = () => {
    try {
      return localStorage.getItem('adminLoggedIn') === 'true';
    } catch (e) {
      return false;
    }
  };
  </script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const adminSection = document.getElementById('adminOnlySection');
    const notAdminSection = document.getElementById('notAdminSection');

    function updateAdminView() {
      if (window.isAdminMode && window.isAdminMode()) {
        adminSection.style.display = 'block';
        notAdminSection.style.display = 'none';
        setupAdminPanel();
      } else {
        adminSection.style.display = 'none';
        notAdminSection.style.display = 'block';
      }
    }

    function setupAdminPanel() {
      // Feature-Status aktualisieren
      updateFeatureStatus();
    }

    function updateFeatureStatus() {
      const today = new Date();
      const ablaufplanDate = new Date(2026, 4, 1);
      const buffetDate = new Date(2026, 4, 1);
      const guestbookDate = new Date(2026, 4, 15);
      const danksagungDate = new Date(2026, 4, 16);

      document.getElementById('ablaufplanStatus').innerHTML = 
        today >= ablaufplanDate ? '✅ Sichtbar für alle' : '🔒 Versteckt bis 01.05.2026';
      document.getElementById('buffetStatus').innerHTML = 
        today >= buffetDate ? '✅ Sichtbar für alle' : '🔒 Versteckt bis 01.05.2026';
      document.getElementById('guestbookStatus').innerHTML = 
        today >= guestbookDate ? '✅ Sichtbar für alle' : '🔒 Versteckt bis 15.05.2026';
      document.getElementById('danksagungStatus').innerHTML = 
        today >= danksagungDate ? '✅ Sichtbar für alle' : '🔒 Versteckt bis 16.05.2026';
    }

    // Countdown Funktion
    function updateCountdown() {
      const weddingDate = new Date(2026, 4, 15, 10, 30);
      const now = new Date();
      const diffTime = weddingDate - now;
      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
      const diffHours = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      
      document.getElementById('daysUntil').textContent = diffDays;
      document.getElementById('hoursUntil').textContent = diffHours;
    }

    // Checkliste speichern
    function saveTasks() {
      const tasks = {};
      for (let i = 1; i <= 6; i++) {
        tasks[`task${i}`] = document.getElementById(`task${i}`).checked;
      }
      localStorage.setItem('weddingTasks', JSON.stringify(tasks));
    }

    // Checkliste laden
    function loadTasks() {
      const saved = localStorage.getItem('weddingTasks');
      if (saved) {
        const tasks = JSON.parse(saved);
        for (let key in tasks) {
          const checkbox = document.getElementById(key);
          if (checkbox) checkbox.checked = tasks[key];
        }
      }
    }

    // Countdown und Tasks initialisieren
    updateCountdown();
    loadTasks();
    setInterval(updateCountdown, 60000);

    updateAdminView();
    window.addEventListener('adminStateChanged', updateAdminView);
  });
  </script>
</body>
</html>
